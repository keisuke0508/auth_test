<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>auth test</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  </head>

  <body>
    <!-- facebook auth -->
    <script type="text/javascript">
      window.fbAsyncInit = function() {
        FB.init({
          appId            : {{ facebook_app_id }},
          autoLogAppEvents : true,
          xfbml            : true,
          version          : 'v3.2'
        });
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "https://connect.facebook.net/ja_JP/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));

       function facebookAuth(){
         FB.login(function(response){
           if(response.status === "connected"){
             $.ajax({
               type: 'POST',
               url : '/',
               data: {
                 token: response.authResponse.accessToken
               }
             }).done(function(){
               alert("connected by " + response.authResponse.accessToken);
             });
           }else{
             alert("cannot connected");
           }
         });
       }

    </script>
    <script type="text/javascript" src="/static/js/app.{{ static_file_version }}.js"></script>
    <div style="width:300px;height:100px;background-color:skyblue;text-align:center;" id="js-facebookAuthBtn" onclick="facebookAuth();">Facebookでログイン</div>

    <!-- line auth -->
    <a href="https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id={{ line_channel_id }}&redirect_uri=http://localhost:5000/linetest&state={{ line_state }}&scope=openid%20profile"><div style="width:300px;height:100px;background-color: lightgreen;text-align:center;">LINEでログイン</div>

  </body>
</html>
